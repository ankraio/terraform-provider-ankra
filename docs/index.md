---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ankra Provider"
description: |-

---


# ankra Provider



## Example Usage


```hcl
terraform {
  required_providers {
    ankra = {
      source  = "ankraio/ankra"
      version = "0.1.6"
    }
  }
}

provider "ankra" {
  ankra_token = var.ankra_token
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `ankra_token` (String) The API token for authenticating with ankra.


## Pre-configured stack
```hcl
terraform {
  required_providers {
    ankra = {
      source  = "local/ankra"
      version = "0.1.6"
    }
  }
}


resource "ankra_cluster" "example" {
  cluster_name            = "dev"
  github_credential_name  = "my-github-cred"
  github_branch           = "main"
  github_repository       = "ankra-io/my-repo"
  ankra_token             = var.ankra_token

  stacks {
    name        = "create-ns-test"
    description = "Test stack for creating a namespace"

    manifests {
      name            = "test-namespace"
      manifest_base64 = base64encode(<<YAML
apiVersion: v1
kind: Namespace
metadata:
  name: test-ns
YAML
      )
    }
    manifests {
      name            = "test-configmap"
      manifest_base64 = base64encode(<<YAML
apiVersion: v1
kind: ConfigMap
metadata:
  name: test-config
  namespace: test-ns
data:
  key: value
YAML
      )
    }
    addons {
      name                 = "test-addon"
      chart_name           = "nginx"
      chart_version        = "1.2.3"
      repository_url       = "https://charts.example.com"
      namespace            = "test-ns"
      # Optional fields:
      # configuration_type  = "values"
      # configuration       = "{}"
      # parents             = []
      # job_configuration   = "{}"
    }
  }
}

output "ankra_cluster_id" {
  value = ankra_cluster.example.cluster_id
}
output "ankra_cluster_helm_command" {
  value = ankra_cluster.example.helm_command
}
```

## Running the Helm command remotely

After creating your cluster, you can use Terraform's `remote-exec` provisioner to run the Helm command on a remote Kubernetes host (e.g., provisioned by kubepray):

```hcl
resource "null_resource" "run_helm_command" {
  provisioner "remote-exec" {
    connection {
      type        = "ssh"
      host        = var.kubepray_host
      user        = var.kubepray_user
      private_key = file(var.kubepray_private_key)
    }

    inline = [
      ankra_cluster.example.helm_command
    ]
  }
}
```

Make sure the remote host has `kubectl` and `helm` installed, and that your connection variables (`kubepray_host`, `kubepray_user`, `kubepray_private_key`) are set appropriately.
```


